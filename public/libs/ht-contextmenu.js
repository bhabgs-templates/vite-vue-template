!function(X,n){"use strict";var H="ht",G=X[H],W="position",f="absolute",o="px",z="left",O="top",K="innerHTML",J="className",l="width",R="height",L="0",N="display",x="none",d="visibility",C="user-select",j="margin",B="padding",t=null,E=G.Color,Y=G.Default,s=Y.getInternal(),m=X.setTimeout,y=X.setInterval,$=X.clearTimeout,g=X.clearInterval,r=X.parseInt,h=Y.isLeftButton,D=Y.isDragging,V=Y.startDragging,i=Y.getDistance,S=Y.isTouchable,U=Y.isTouchEvent,e=Y.getPagePoint,P=Y.isRightButton,u=E.widgetIconHighlight,A=E.widgetIconBorder,I=E.widgetIconGradient,T=function(){return document},w=function(V,H){return V.querySelectorAll(H)},b=function(J){var A=T().createElement(J);return"ul"===J&&(M(A,W,"relative"),M(A,j,L),M(A,B,L),M(A,"list-style",x),M(A,"box-sizing","border-box"),M(A,"-moz-box-sizing","border-box"),M(A,N,"inline-block"),M(A,"vertical-align","text-bottom"),M(A,"border","1px solid "+Y.contextMenuBorderColor),M(A,"box-shadow","0 0 16px 1px "+Y.contextMenuShadowColor),M(A,"overflow","hidden"),Y.contextMenuBorderRadius&&M(A,"border-radius",Y.contextMenuBorderRadius+o)),A},Z=function(e){var m=e.touches[0];return m?m:e.changedTouches[0]},p=function(){return b("div")},Q=function(){return b("canvas")},M=function(q,i,K){q.style.setProperty(i,K,t)},k=function(v,F,S){Y.def(G.widget[v],F,S)},F=function(i,J){i.appendChild(J)},q=function(d,t){d.removeChild(t)},a=s.addEventListener,_=s.removeEventListener;s.addMethod(Y,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:A},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:u}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:A},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:u,gradient:Y.imageGradient,gradientColor:I,background:u}]},contextMenuLabelFont:(S?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var v=function(U){var I=this,$=U._view;I.$11b=U,I.addListeners(),a($,"contextmenu",function(I){I.preventDefault()});var D=I.$37b=I.$36b.bind(I);a($,"mouseover",D),a($,"mouseout",D)};Y.def(v,n,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(z){if(Y.preventDefault(z),h(z)){for(var Z=this,g=Z.$11b,G=Z.getView(),J=G.children,s=0;s<J.length;s++){var N=J[s],B=N.$24b,W=N.$25b;if(B&&B.contains(z.target))return g.scrollUp(N),Z.$28b=m(function(){Z.$29b=y(function(){g.scrollUp(N)},100)},500),V(Z,z),void 0;if(W&&W.contains(z.target))return g.scrollDown(N),Z.$28b=m(function(){Z.$29b=y(function(){g.scrollDown(N)},100)},500),V(Z,z),void 0}Z.$30b=e(z)}},handle_mousedown:function(b){this.handle_touchstart(b)},handle_touchend:function(N){if(h(N)){var E=this,S=E.$30b,P=U(N)?{x:Z(N).pageX,y:Z(N).pageY}:{x:N.pageX,y:N.pageY};if(!S||i(S,P)>1)return delete E.$30b,void 0;for(var W=E.getView(),m=E.$11b,R=N.target,b=t,z=t,r=m._items,l=W.$26b,u=0;u<l.length;u++)if(z=l[u],z.contains(R)){b=z.getAttribute("data-id");break}if(b&&r){var H=m.$17b(r,function(n){return n._id===b});if(H){var L=!1;H.disabled instanceof Function?L=H.disabled.call(m,H):H.disabled===!0&&(L=!0),L||(H.items?U(N)&&E.$36b(z,!0):m.$1b(H,N))}}delete E.$30b}},$36b:function(c,g){if(!D()){var W,P=this,x=P.$11b,k=P.getView(),V=x.$20b||k.children[0],y=x.$19b,L=k.$26b,Q=k.children,E=c.target,w=k.getBoundingClientRect(),v=Y.getWindowInfo(),K=v.width,S=v.height,t=function(e){for(var A=0;A<Q.length;A++){var o=Q[A],b=new RegExp(e+"$"),_=o[J];if(_&&(b.test(_)||_.indexOf(e+" ")>=0))return o}},h=function(f){for(var F=0;F<L.length;F++){var G=L[F],C=new RegExp(f+"$"),A=G[J];if(A&&(C.test(A)||A.indexOf(f+" ")>=0))return G}},X=function(T){var I=h("menu-item"+T.$45b),e=I.getBoundingClientRect(),i=e.top-w.top,C=e.left-w.left;M(T,O,i+o),M(T,z,C+e.width+o);var Q=T.getBoundingClientRect(),Y=Q.top,c=Q.left,l=Q.height,P=Q.width,$=Y+l+2,X=c+P+2;$>S&&M(T,O,i+S-$+o),X>K&&M(T,z,C-P+o)};if(g)W=c;else{if("mouseover"===c.type){for(var s=0;s<L.length;s++){var G=L[s];if(G.contains(E)){W=G;break}}if(!W&&y){var f=y.parentNode,I=t("submenu"+y.getAttribute("data-id"));(I&&I.contains(E)||f&&f.contains(E))&&(W=y)}}else if("mouseout"===c.type){for(var B=!1,H=c.relatedTarget,s=0;s<Q.length;s++){var r=Q[s];if("hidden"!==r.style.visibility&&r.contains(H)){B=!0;break}}if(B)return}!W&&V&&(W=h("menu-item"+(V.$45b||"NaN")))}if(W!=y){if(y)for(var R=y;R;){if(R[J]=R[J].replace(" menu-item-hover",""),R[J].indexOf("disabled")<0){var u=x.getItemByProperty("_id",R.getAttribute("data-id"));null!=u.background?u.background instanceof Function?M(R,"background-color",u.background.call(x,u)):M(R,"background-color",u.background):M(R,"background-color",Y.contextMenuBackground),M(R,"color",Y.contextMenuLabelColor)}var T=t("submenu"+R.getAttribute("data-id"));T&&M(T,d,"hidden");var n=R.parentNode;R=h("menu-item"+(n.$45b||"NaN"))}if(W){for(var q=W,p=[];q;){q[J]+=" menu-item-hover",q[J].indexOf("disabled")<0&&(M(q,"background-color",Y.contextMenuHoverBackground),M(q,"color",Y.contextMenuHoverLabelColor));var $=t("submenu"+q.getAttribute("data-id"));$&&(M($,d,"visible"),p.push($));var n=q.parentNode;q=h("menu-item"+(n.$45b||"NaN"))}p.reverse(),p.forEach(function(_){X(_)})}}x.$19b=W,x.$20b=W?W.parentNode:k.children[0]}},handle_mouseup:function(k){this.handle_touchend(k)},handleWindowTouchEnd:function(){var n=this;n.$28b!=t&&($(n.$28b),delete n.$28b),n.$29b!=t&&(g(n.$29b),delete n.$29b),delete n.$34b,delete n.$30b,delete n.$35b},handleWindowMouseUp:function(h){this.handleWindowTouchEnd(h)},handle_mousemove:function($){this.handle_touchmove($)},handle_touchmove:function(Q){if(!D()&&h(Q)){for(var R=this,o=R.getView().children,J=t,k=0;k<o.length;k++){var x=o[k];if(x.contains(Q.target)){J=x;break}}var e=R.$30b,l=U(Q)?{x:Z(Q).pageX,y:Z(Q).pageY}:{x:Q.pageX,y:Q.pageY};J&&e&&i(e,l)>2&&(V(R,Q),R.$34b=J,R.$35b=J.$18b)}},handleWindowTouchMove:function(X){X.preventDefault();var V=this,$=V.$11b,S=V.$34b,a=V.$35b,J=V.$30b;if(J&&S){var u=U(X)?{x:Z(X).pageX,y:Z(X).pageY}:{x:X.pageX,y:X.pageY},T=u.y-J.y;T>0?$.scrollUp(S,S.$18b-(a-T)):$.scrollDown(S,a-T-S.$18b)}},handleWindowMouseMove:function(C){this.handleWindowTouchMove(C)},$10b:function(q,n){q.preventDefault();for(var A=this,v=A.getView().children,f=t,K=0;K<v.length;K++){var V=v[K];if(V.contains(q.target)){f=V;break}}if(f){var Z=this.$11b,E=Z.getRowHeight();Math.abs(n)>.05&&(n>0?Z.scrollUp(f,n*E):0>n&&Z.scrollDown(f,-n*E))}},handle_mousewheel:function(M){this.$10b(M,M.wheelDelta/40)},handle_DOMMouseScroll:function(Q){this.$10b(Q,-Q.detail)},$44b:function(G){this.getView().contains(G.target)||this.$11b.hide()},$41b:function(u){Y.preventDefault(u)},$4b:function(V,v){var $=this.$11b;if(v=v||$._items,v&&v.length&&V.keyCode){var G=[V.keyCode];V.shiftKey&&G.push(16),V.ctrlKey&&G.push(17),V.altKey&&G.push(18),/mac/.test(X.navigator?X.navigator.userAgent.toLowerCase():"")?V.metaKey&&G.push(17):V.metaKey&&G.push(91),G.sort();var z=G.join(),h=$.$17b(v,function(P){if(P.key){var H=P.key.slice(0);return H.sort(),z===H.join()}});if(h){h.preventDefault!==!1&&V.preventDefault();var d=!1;h.disabled instanceof Function?d=h.disabled.call($,h):h.disabled===!0&&(d=!0),d||$.$1b(h,V)}}},$39b:function(_){this.$32b=e(_)},$38b:function(o){if(Y.preventDefault(o),!h(o)){var O=this;O._showContextMenu=P(o),O._showContextMenu||(O.$31b=e(o),O.$33b=m(function(){O._showContextMenu=!0,delete O.$33b},600))}},$40b:function(T){var y=this;y._showContextMenu&&(P(T)?y.$11b.show(T):y.$31b&&(y.$32b?i(y.$31b,y.$32b)<10&&y.$11b.show(T):y.$11b.show(T))),y.$33b!=t&&($(y.$33b),delete y.$33b),delete y.$31b,delete y.$32b}}),G.widget.ContextMenu=function(Q){var L=this,g=L._view=s.createView(null,L);g[J]="ht-widget-contextmenu",L.setItems(Q),L.$13b=new v(L),M(g,"font",Y.contextMenuLabelFont),M(g,W,f),M(g,"cursor","default"),M(g,"-webkit-"+C,x),M(g,"-moz-"+C,x),M(g,"-ms-"+C,x),M(g,C,x),M(g,"box-sizing","border-box"),M(g,"-moz-box-sizing","border-box"),Y.baseZIndex!=t&&M(g,"z-index",r(Y.baseZIndex)+2+""),L.$3b=function(v){L.$13b.$4b(v)}},k("ContextMenu",n,{$5b:0,_items:t,$21b:t,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var I=this,B=I._enableGlobalKey;B===!1&&(a(T(),"keydown",I.$3b),I._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,_(T(),"keydown",this.$3b)},setItems:function(C){this._items=C},getItems:function(){return this._items},setVisibleFunc:function(F){this.$16b=F},setLabelMaxWidth:function(B){this.$43b=B},$1b:function(g,K){var z=this;if("check"===g.type)g.selected=!g.selected;else if("radio"===g.type){var C=g.groupId;z.$17b(z._items,function(R){R.groupId===C&&(R.selected=!1)}),g.selected=!0}if(z.hide(),g.action)g.action.apply(g.scope||z,[g,K]);else if(g.href){var T=g.linkTarget||"_self";X.open(g.href,T)}},getItemById:function(c){return this.getItemByProperty("id",c)},setItemVisible:function(h,d){var s=this.getItemById(h);s&&(s.visible=d)},getItemByProperty:function(P,D,O){var N=this;if(O=O||N._items,!O||0===O.length)return t;var j=N.$17b(O,function(w){return w[P]===D});return j||t},scrollUp:function(y,e){var f=this;if(e=e==t?20:e,e=r(e),0!==e){var M=0;y.$18b>e&&(M=y.$18b-e),f.$42b(y,M),y.scrollTop=M,y.$18b=M}},scrollDown:function(s,c){var R=this;if(c=c==t?20:c,c=r(c),0!==c){var e=s.$22b,x=s.$23b,b=e-x;x+s.$18b+c<e&&(b=s.$18b+c),R.$42b(s,b),s.scrollTop=b,s.$18b=b}},$42b:function(c,m){m=m==t?c.$18b:m;var s=c.$24b,C=c.$25b;s&&(M(s,"top",m+o),0==m?M(s,N,x):M(s,N,"block")),C&&(M(C,"bottom",-m+o),m==c.$22b-c.$23b?M(C,N,x):M(C,N,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(G,n){for(var P=0;P<G.length;P++){var T=G[P];if(n(T))return T;if(T.items){var p=this.$17b(T.items,n);if(p)return p}}},$2b:function(u,m){for(var E=this,Z=0;Z<u.length;Z++){E.$5b++;var _=u[Z];if(_.visible!==!1)if(Y.isFunction(_.visible)&&_.visible()===!1)this._clearItemId(_);else if(!E.$16b||E.$16b.call(E,_)){var S=b("li"),s=E.$5b+"";if(M(S,"white-space","nowrap"),M(S,N,"block"),"separator"===_||_.separator===!0){var x=p();x[J]="separator",M(x,R,Y.contextMenuSeparatorWidth+o),M(x,"background",Y.contextMenuSeparatorColor),F(S,x)}else{_._id=s,S.setAttribute("data-id",s);var v=b("span"),c=b("span"),A=Q(),e=p();if(M(v,N,"inline-block"),M(v,R,"1.2em"),M(c,N,"inline-block"),M(c,R,"1.2em"),M(c,"line-height","1.2em"),A[J]="prefix",M(A,N,"inline-block"),M(A,l,"1em"),M(A,R,"1em"),M(A,"vertical-align","middle"),M(A,j,"0 0.2em"),"check"===_.type&&_.selected?A[J]+=" check-prefix":"radio"===_.type&&_.selected&&(A[J]+=" radio-prefix"),F(S,A),_.icon){var H=Q();H[J]="contextmenu-item-icon",M(H,N,"inline-block"),M(H,R,"1.2em"),M(H,l,"1.2em"),M(H,"margin-right","0.2em"),M(H,"float","left"),H.$50b=_.icon,H._item=_,F(v,H)}if(c[K]=_.label,F(v,c),F(S,v),e[J]="suffix",M(e,N,"inline-block"),M(e,"margin-left","1em"),M(e,"margin-right","0.4em"),M(e,"text-align","right"),M(e,"font-size","75%"),_.items&&(e[K]=Y.contextMenuSubmenuMark),_.suffix&&(e[K]=_.suffix),F(S,e),S[J]="menu-item menu-item"+s,null!=_.background?_.background instanceof Function?M(S,"background-color",_.background.call(E,_)):M(S,"background-color",_.background):M(S,"background-color",Y.contextMenuBackground),M(S,"color",Y.contextMenuLabelColor),M(S,B,"3px 0"),_.disabled instanceof Function){var t=_.disabled.call(E,_);t&&(S[J]+=" disabled",M(S,"color",Y.contextMenuDisabledLabelColor))}else _.disabled&&(S[J]+=" disabled",M(S,"color",Y.contextMenuDisabledLabelColor));if(_.items){E.$21b||(E.$21b=new G.List);var O=b("ul");O[J]="submenu"+s,O.$45b=s,M(O,d,"hidden"),M(O,W,f),F(E._view,O),E.$21b.add(O),E.$2b(_.items,O)}}F(m,S)}else this._clearItemId(_);else this._clearItemId(_)}},rebuild:function(){var a=this,S=a._items,w=a._view;if(w&&(w[K]="",a.$21b=t,a.$5b=0,a.$19b=t,a.$20b=t,w.$26b=t,S&&0!==S.length)){var s=b("ul",a._r);F(w,s),a.$2b(S,s)}},addTo:function(R){if(R){var u=this,S=u.$13b;u.$12b=R,u.$9b=function(C){S.$44b(C)};var T=u.$6b=function(m){S.$38b(m)},U=u.$7b=function(R){S.$39b(R)},W=u.$8b=function(B){S.$40b(B)};Y.mockTouch&&(a(R,"touchstart",T,!0),a(R,"touchmove",U),a(R,"touchend",W)),a(R,"mousedown",T,!0),a(R,"mousemove",U),a(R,"mouseup",W),u.$27b=function(y){S.$41b(y)},a(R,"contextmenu",u.$27b)}},showOnView:function(b,C,e){b=b.getView?b.getView():b;var $=Y.getWindowInfo(),n=b.getBoundingClientRect();this.show(n.left+$.left+C,n.top+$.top+e)},show:function(d,P,c){var g=this,c=c==t?!0:!1,S=g._view;if(S){if(g.invalidate(),1===arguments.length){var b=d;if(U(b)){var X=Z(b);d=X.pageX,P=X.pageY}else d=b.pageX,P=b.pageY}var E=Y.getWindowInfo(),j=E.width,A=E.height,s=E.left,q=E.top,V={pageX:d,pageY:P,clientX:d-s,clientY:P-q,target:1,originEvent:b},I=V.clientX,H=V.clientY,v=function(x){x.style.height=A-6+o;var e=p(),i=p(),X=function(A){M(A,W,f),M(A,"text-align","center"),M(A,l,"100%"),M(A,"font-size",10+o),M(A,"padding","2px 0"),M(A,"border","0px solid "+Y.contextMenuScrollerBorderColor),M(A,"background-color",Y.contextMenuScrollerColor1),A.style.backgroundImage="-webkit-linear-gradient(top, "+Y.contextMenuScrollerColor1+", "+Y.contextMenuScrollerColor2+")",A.style.backgroundImage="linear-gradient(to bottom, "+Y.contextMenuScrollerColor1+", "+Y.contextMenuScrollerColor2+")"};e[J]="menu-arrow-item menu-arrow-item-top",i[J]="menu-arrow-item menu-arrow-item-bottom",X(e),M(e,"top",L),M(e,"left",L),M(e,"border-bottom-width",1+o),e[K]="▲",X(i),M(i,"bottom",L),M(i,"left",L),M(i,"border-top-width",1+o),i[K]="▼",x.$24b=e,x.$25b=i,x.$18b=x.scrollTop,x.$22b=x.scrollHeight,x.$23b=x.clientHeight,F(x,e),F(x,i),g.$42b(x)};g.beforeShow&&g.beforeShow(V);var Q=g._items;if(Q&&(b&&b.preventDefault(),Q.length)){g.rebuild(),Y.appendToScreen(S),S.$26b=w(S,".menu-item");var i=S.children[0];i.offsetHeight>A&&v(i);var D=H+(c?1:0),h=I+(c?1:0),C=function(y){for(var i=0,Q=0,m=0,f=g.$43b;m<y.children.length;m++){var v=y.children[m];if(v.getAttribute("data-id")){var a=v.children[1],D=v.children[2],E=a.children;if(f){var j=E[0];E.length>1&&(j=E[1]),j.offsetWidth>f&&(j[K]="<marquee scrollamount='3'>"+j[K]+"</marquee>",j.children[0].style.verticalAlign="text-bottom",M(j,l,f+o),M(j,N,"inline-block"))}var W=a.offsetWidth,q=D.offsetWidth;W>i&&(i=W),q>Q&&(Q=q)}}for(m=0;m<y.children.length;m++){var v=y.children[m];if(v.getAttribute("data-id")){var a=v.children[1],D=v.children[2],p=a.children[0],L=a.children[1];!L&&p.style.width&&M(p,l,i+o),M(a,l,i+o),M(D,l,Q+o)}}};C(i);var u=H+3+S.offsetHeight,e=I+3+S.offsetWidth;u>A?M(S,O,D-(u-A)+q+o):M(S,O,D+q+o),e>j?M(S,z,h-(e-j)+s+o):M(S,z,h+s+o);var $=g.$21b;$&&$.each(function(d){C(d),d.offsetHeight>A&&v(d)}),g.$9b&&(Y.mockTouch&&a(T(),"touchstart",g.$9b,!0),a(T(),"mousedown",g.$9b,!0)),g.afterShow&&g.afterShow(V),g.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=t:!1},getRelatedView:function(){return this.$12b},hide:function(){var b=this,B=b._view;B&&B.parentNode&&(q(B.parentNode,B),Y.mockTouch&&_(T(),"touchstart",b.$9b,!0),_(T(),"mousedown",b.$9b,!0),b.afterHide&&b.afterHide())},dispose:function(){var q=this,y=q.$12b,c=q._view;c&&(this.hide(),q.disableGlobalKey(),y&&(Y.mockTouch&&(_(y,"touchstart",q.$6b,!0),_(y,"touchmove",q.$7b),_(y,"touchend",q.$8b)),_(y,"mousedown",q.$6b,!0),_(y,"mousemove",q.$7b),_(y,"mouseup",q.$8b),_(y,"contextmenu",q.$27b)),q._view=q._items=q.$21b=q.$19b=q.$12b=q.beforeShow=q.afterShow=q.afterHide=q.$9b=q.$3b=q.$6b=q.$7b=q.$8b=q.$27b=t)},$46b:function(u,r,e,h,f){var p=s.initContext(u);s.translateAndScale(p,0,0,1),p.clearRect(0,0,e,h),Y.drawStretchImage(p,Y.getImage(r),"fill",0,0,e,h,f,this),p.restore()},$47b:function(){var e,H,o,Z=this,S=Z._view;if(Z.isShowing()){var N=w(S,".check-prefix");for(o=0;o<N.length;o++){var v=N[o];e=v.clientWidth,H=v.clientHeight,v.$48b=e,v.$49b=H,s.setCanvas(v,e,H)}var f=w(S,".radio-prefix");for(o=0;o<f.length;o++){var i=f[o];e=i.clientWidth,H=i.clientHeight,i.$48b=e,i.$49b=H,s.setCanvas(i,e,H)}var $=w(S,".contextmenu-item-icon");for(o=0;o<$.length;o++){var O=$[o];e=O.clientWidth,H=O.clientHeight,O.$48b=e,O.$49b=H,s.setCanvas(O,e,H)}}},validateImpl:function(){var k,g,j,p=this,W=p._view;if(p.isShowing()){var D=w(W,".check-prefix");for(j=0;j<D.length;j++){var i=D[j];k=i.$48b,g=i.$49b,k&&g&&p.$46b(i,Y.contextMenuCheckIcon,k,g)}var b=w(W,".radio-prefix");for(j=0;j<b.length;j++){var B=b[j];k=B.$48b,g=B.$49b,k&&g&&p.$46b(B,Y.contextMenuRadioIcon,k,g)}var H=w(W,".contextmenu-item-icon");for(j=0;j<H.length;j++){var _=H[j];k=_.$48b,g=_.$49b,k&&g&&p.$46b(_,Y.getImage(_.$50b),k,g,_._item)}}},_clearItemId:function(s){var m=this;delete s._id,s.items&&s.items.forEach(function(U){m._clearItemId(U)})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);